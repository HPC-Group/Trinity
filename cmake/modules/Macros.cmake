MACRO(AddGoogleTest)
	SET(gtest_force_shared_crt ON CACHE BOOL "Always use msvcrt.dll" FORCE)
	ADD_SUBDIRECTORY(gmock)
	ENABLE_TESTING()
	INCLUDE_DIRECTORIES(${gmock_SOURCE_DIR}/include ${gmock_SOURCE_DIR})
	INCLUDE_DIRECTORIES(${gtest_SOURCE_DIR}/include ${gtest_SOURCE_DIR})
	IF (WIN32) 
		SET_TARGET_PROPERTIES(gtest gtest_main PROPERTIES COMPILE_DEFINITIONS "_VARIADIC_MAX=10")
	ENDIF()
ENDMACRO(AddGoogleTest)

MACRO(MarkAsExternal EXT_TARGET)
	IF(TARGET ${EXT_TARGET})
		SET_TARGET_PROPERTIES(${EXT_TARGET} PROPERTIES FOLDER "Externals")
	ENDIF()
ENDMACRO(MarkAsExternal)

FUNCTION(CreateSourceGroups SOURCE_FILES RELATIVE_TO)
    FOREACH(FILE ${SOURCE_FILES}) 
        FILE(RELATIVE_PATH RELATIVE_SOURCE_PATH ${RELATIVE_TO} ${FILE})
        GET_FILENAME_COMPONENT(PATH_COMPONENT ${RELATIVE_SOURCE_PATH} DIRECTORY)
        GET_FILENAME_COMPONENT(EXTENSION ${RELATIVE_SOURCE_PATH} EXT)
        IF (${EXTENSION} STREQUAL ".h")
            SET(GROUP "${PATH_COMPONENT}\\Header Files")
        ELSE()
            SET(GROUP "${PATH_COMPONENT}\\Source Files")
        ENDIF()
        SOURCE_GROUP(${GROUP} FILES ${FILE})
    ENDFOREACH()
ENDFUNCTION(CreateSourceGroups)